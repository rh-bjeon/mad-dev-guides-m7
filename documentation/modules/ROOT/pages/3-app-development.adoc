= 3. 애플리케이션 개발 - 25분
:imagesdir: ../assets/images

== 이 랩의 목표

이 랩의 목표는 새로운 소프트웨어 템플릿을 사용하여더 많은 현대화를 모색하는 것입니다. 

또한 개발자가 **Red Hat OpenShift Dev Spaces**를 사용하여 자유롭게 코딩하는 방법을 보여줍니다. 이 섹션에서는 **gateway** 및 **frontend** 마이크로서비스를 마이그레이션하여 Cool Store 애플리케이션의 배포를 완료합니다.


**모듈 목표**:

* 기존 **소프트웨어 템플릿**을 사용하여 **Frontend NodeJS(Angular) 애플리케이션**의 컴포넌트를 생성합니다.
* 기존 **소프트웨어 템플릿**을 사용하여 **Gateway Java 애플리케이션**의 컴포넌트를 생성합니다.
* 애플리케이션 세부정보, ArgoCD 및 클러스터 정보의 개요를 확인합니다.
* Red Hat Developer Hub에서 GitLab 이슈를 확인합니다.
* Red Hat OpenShift Dev Spaces를 사용하여 GitLab 이슈를 해결합니다.
* API와 애플리케이션 종속성을 살펴봅니다.

== 3.1 Gateway Java 애플리케이션 이동

=== 3.1.1 소프트웨어 템플릿을 사용하여 첫 번째 Gateway 애플리케이션 빌드 및 배포

* 왼쪽 메뉴에서 *만들기*를 클릭하세요:

* *Java Gateway Application* 템플릿을 선택하세요:

이미지:모듈3/소프트웨어_템플릿_게이트웨이.png[너비=50%]  

미리 정의된 소프트웨어 템플릿을 기반으로 구성 요소를 만들려면 다음 단계를 따르세요.

*1단계* - GitLab 위치에 대한 정보 제공:

* *Repo Host*: OpenShift에 이미 설치된 GitLab 도메인입니다. Red Hat Developer Hub는 이 입력 데이터를 사용하여 소스 리포지토리와 매니페스트를 업로드합니다.

** *Repo Host*를 OpenShift 도메인으로 교체:

[.콘솔-입력]
[소스, bash]
----
gitlab-gitlab.%SUBDOMAIN%
----

이미지:module3/st_gitlab_info.png[너비=65%]  

* *Repo Group*: 이미 구성된 GitLab 조직입니다. Red Hat Developer Hub는 이 입력 데이터를 사용하여 소스 리포지토리와 매니페스트를 업로드합니다.

* *다음*을 클릭하세요

*2단계* - 클러스터 ID에 대한 정보 제공:

* *클러스터 ID*: OpenShift 도메인입니다. Red Hat Developer Hub는 이 입력 데이터를 사용하여 애플리케이션을 빌드하고 배포합니다.

** *클러스터 ID*를 OpenShift 도메인으로 바꾸세요:

[.콘솔-입력]
[소스, bash]
----
.%하위 도메인%
----

이미지:모듈3/st_component_clusterid.png[너비=65%]  

* *네임스페이스*: OpenShift 네임스페이스입니다. Red Hat Developer Hub는 이 입력 데이터를 사용하여 해당 네임스페이스에서 애플리케이션을 빌드하고 배포합니다.

** *네임스페이스*를 다음으로 바꾸세요:

[.콘솔-입력]
[소스, bash]
----
rhdhub-%USERID%
----

이미지:모듈3/st_component_namespace.png[너비=40%]  

*참고*: 각 랩 참가자는 모든 애플리케이션에 사용할 고유한 네임스페이스를 이미 할당받았습니다. 각 애플리케이션은 사용자 이름을 기반으로 공유된 식별을 갖게 됩니다.

* *소유자*: 소유자는 사용자 ID입니다. Red Hat Developer Hub는 이 입력 데이터를 빌드 및 배포 프로세스에 사용합니다.
** 사용자 ID를 입력하세요:

[.콘솔-입력]
[소스, bash]
----
%사용자ID%
----

이미지:module3/st_component_owner.png[너비=40%]  

* *다음*을 클릭하세요.

*3단계* - 빌드 정보 제공:

* *이미지 호스트*: 애플리케이션 이미지는 이 레지스트리 URL에 저장됩니다. 이 랩에서는 OpenShift의 내부 레지스트리를 사용합니다. Red Hat Developer Hub는 이 입력 데이터를 애플리케이션의 빌드 및 배포 프로세스에 사용합니다.

* *이미지 태그*: 이미지를 식별하는 데 사용되는 이미지 태그입니다. 이미지는 애플리케이션 이름과 태그로 구성됩니다. Red Hat Developer Hub는 이 입력 데이터를 애플리케이션의 빌드 및 배포 프로세스에 사용합니다.

* *구성 요소 ID*: 구성 요소 ID는 애플리케이션 이름입니다. Red Hat Developer Hub는 이 입력 데이터를 애플리케이션의 빌드 및 배포 프로세스에 사용합니다.

** *구성 요소 ID*를 *귀하*의 사용자 번호로 바꾸세요:

[.콘솔-입력]
[소스, bash]
----
게이트웨이-앱-%USERID%
----

이미지:모듈3/st_component_componentid_gateway.png[너비=65%]  

* *리뷰*를 클릭하세요.

* 데이터를 검토하세요.

*샘플 데이터*

이미지:모듈3/st_component_review_gateway.png[너비=80%]  

* *만들기*를 클릭하세요.

=== 3.1.2 애플리케이션 개요 탐색
*축하합니다* *Red Hat Developer Hub*로 첫 번째 Java Gateway 애플리케이션을 빌드했습니다. 이제 구성 요소를 살펴보고 애플리케이션 개요를 살펴볼 시간입니다.

* 모든 활동이 녹색으로 표시되면 *카탈로그에서 구성 요소 열기*를 클릭합니다.

이미지:모듈3/task_activity.png[너비=100%]  

* RHDH는 구성 요소 정보가 있는 새 탭을 엽니다.

** 화면의 정보를 검토할 시간을 가지세요.

이미지:모듈3/게이트웨이_개요.png[너비=100%]  

* *CI*를 클릭하여 파이프라인 정보를 검토하세요.
파이프라인은 몇 초 후에 트리거됩니다. 몇 분 후에 파이프라인이 *성공*으로 완료된 것을 볼 수 있습니다.

이미지:모듈3/게이트웨이_파이프라인.png[너비=100%]

* 배포 상태를 검토하려면 *토폴로지*를 클릭하세요.
파이프라인이 성공하면 배포가 즉시 *파란색*으로 표시됩니다.

** 배포 *gateway-app-%USERID%*를 클릭하세요.

오른쪽에서 신청서 세부 정보를 확인하실 수 있습니다.

이미지:module3/gateway_deployment.png[너비=80%]

* *KUBERNETES*를 클릭하여 신청 상태를 확인하세요.
포드가 아직 준비되지 않은 것을 발견할 수도 있습니다. 모든 것이 녹색으로 표시될 때까지 몇 초 동안 기다리세요.

*참고*: *오류가 있는 pod 1개*는 *오류 보고* 섹션에 표시된 대로 pod가 실패했음을 나타냅니다. 문제가 해결되었고 이제 모든 pod가 녹색입니다.

이미지:module3/gateway_yourclusters.png[너비=100%]

** 포드 정보 확장:

이미지:모듈3/게이트웨이_쿠버네티스_클러스터_ok.png[너비=100%]

모든 내용이 녹색이면 다음 세션으로 넘어갈 준비가 된 것입니다.

*참고*: 다음 섹션에서 이 관점을 계속해서 살펴보겠습니다.

== 3.2 프런트엔드 NodeJS 애플리케이션 이동

=== 3.2.1 소프트웨어 템플릿을 사용하여 첫 번째 프런트엔드 애플리케이션을 빌드하고 배포하세요.

* 왼쪽 메뉴에서 *만들기*를 클릭하세요:

* *프런트엔드 애플리케이션* 템플릿을 선택하세요:

이미지:module3/software_templates_frontend.png[너비=50%]  

미리 정의된 소프트웨어 템플릿을 기반으로 구성 요소를 만들려면 다음 단계를 따르세요.

*1단계* - GitLab 위치에 대한 정보 제공:

* *Repo Host*: OpenShift에 이미 설치된 GitLab 도메인입니다. Red Hat Developer Hub는 이 입력 데이터를 사용하여 소스 리포지토리와 매니페스트를 업로드합니다.

** *Repo Host*를 OpenShift 도메인으로 교체:

[.콘솔-입력]
[소스, bash]
----
gitlab-gitlab.%SUBDOMAIN%
----

이미지:module3/st_gitlab_info.png[너비=65%]  

* *Repo Group*: 이미 구성된 GitLab 조직입니다. Red Hat Developer Hub는 이 입력 데이터를 사용하여 소스 리포지토리와 매니페스트를 업로드합니다.

* *다음*을 클릭하세요.

*2단계* - 클러스터 ID에 대한 정보를 제공합니다.

* *클러스터 ID*: OpenShift 도메인입니다. Red Hat Developer Hub는 이 입력 데이터를 사용하여 애플리케이션을 빌드하고 배포합니다.

** *클러스터 ID*를 OpenShift 도메인으로 바꾸세요:

[.콘솔-입력]
[소스, bash]
----
.%하위 도메인%
----

이미지:모듈3/st_component_clusterid.png[너비=65%]  

* *네임스페이스*: OpenShift 네임스페이스입니다. Red Hat Developer Hub는 이 입력 데이터를 사용하여 해당 네임스페이스에서 애플리케이션을 빌드하고 배포합니다.

** *네임스페이스*를 다음으로 바꾸세요:

[.콘솔-입력]
[소스, bash]
----
rhdhub-%USERID%
----

이미지:모듈3/st_component_namespace.png[너비=40%]  

*참고*: 각 랩 참가자는 모든 애플리케이션에 사용할 고유한 네임스페이스를 이미 할당받았습니다. 각 애플리케이션은 사용자 이름을 기반으로 공유된 식별을 갖게 됩니다.

* *소유자*: 소유자는 사용자 ID입니다. Red Hat Developer Hub는 이 입력 데이터를 빌드 및 배포 프로세스에 사용합니다.
** 사용자 ID를 입력하세요:

[.콘솔-입력]
[소스, bash]
----
%사용자ID%
----

이미지:module3/st_component_owner.png[너비=40%]  

* *다음*을 클릭하세요.

*3단계* - 빌드 정보 제공

* *이미지 호스트*: 애플리케이션 이미지는 이 레지스트리 URL에 저장됩니다. 이 랩에서는 OpenShift의 내부 레지스트리를 사용합니다. Red Hat Developer Hub는 이 입력 데이터를 애플리케이션의 빌드 및 배포 프로세스에 사용합니다.

* *이미지 태그*: 이미지를 식별하는 데 사용되는 이미지 태그입니다. 이미지는 애플리케이션 이름과 태그로 구성됩니다. Red Hat Developer Hub는 이 입력 데이터를 애플리케이션의 빌드 및 배포 프로세스에 사용합니다.

* *구성 요소 ID*: 구성 요소 ID는 애플리케이션 이름입니다. Red Hat Developer Hub는 이 입력 데이터를 애플리케이션의 빌드 및 배포 프로세스에 사용합니다.

** *구성 요소 ID*를 *귀하*의 사용자 번호로 바꾸세요:

[.콘솔-입력]
[소스, bash]
----
프런트엔드 앱-%USERID%
----

이미지:모듈3/st_component_componentid_frontend.png[너비=65%]  

* *리뷰*를 클릭하세요.

* 데이터를 검토하세요.

*샘플 데이터*

이미지:모듈3/st_component_review_frontend.png[너비=100%]  

* *만들기*를 클릭하세요.

=== 3.2.2 애플리케이션 개요 탐색

*축하합니다* *Red Hat Developer Hub*로 첫 번째 프런트엔드 애플리케이션을 빌드했습니다. 이제 구성 요소를 살펴보고 애플리케이션 개요를 살펴볼 시간입니다.

* 모든 활동이 녹색으로 표시되면 *카탈로그에서 구성 요소 열기*를 클릭합니다.

이미지:모듈3/task_activity.png[너비=100%]  

* RHDH는 구성 요소 정보가 있는 새 탭을 엽니다.

** 화면의 정보를 검토하세요:

이미지:module3/frontend_overview.png[너비=100%]

* *CI*를 클릭하여 파이프라인 정보를 검토하세요.
파이프라인은 몇 초 후에 트리거됩니다. 몇 분 후에 파이프라인이 *성공*으로 완료된 것을 볼 수 있습니다.

이미지:모듈3/프론트엔드_파이프라인.png[너비=100%]

* 배포 상태를 검토하려면 *토폴로지*를 클릭하세요.
파이프라인이 성공하면 배포가 즉시 *파란색*으로 표시됩니다.

** 배포 *frontend-app-%USERID%*를 클릭하세요.

오른쪽에서 신청서 세부 정보를 확인하실 수 있습니다.

이미지:모듈3/프론트엔드_토폴로지.png[너비=100%]

* ARGOCD 기록을 확인하려면 *CD*를 클릭하세요.

이미지:module3/frontend_argohistory.png[너비=100%]

* 프런트엔드 애플리케이션에 대해 사용/제공된 API를 검토하려면 *API*를 클릭하세요.

이미지:module3/frontend_apiconsume.png[너비=100%]

* Cool Store UI에 액세스하여 모든 것이 예상대로 작동하는지 확인하세요.

** https://frontend-app-%USERID%-rhdhub-%USERID%.%SUBDOMAIN%/[쿨스토어 웹페이지^]를 클릭하세요

이미지::모듈3/ui_web.png[너비=100%]

=== 3.5 응용 프로그램에 대해 보고된 문제를 수정했습니다.

개발자로서 여러분은 많은 기능 요청이나 이슈를 처리해야 합니다. 이 사용 사례에서는 프런트엔드 애플리케이션의 제목 문제를 해결합니다. Red Hat Developer Hub는 여러분이 한곳에서 앱의 모든 도구와 정보에 액세스할 수 있게 해주는 단일 창입니다.

1. Red Hat Developer Hub의 프런트엔드 구성 요소로 돌아갑니다: https://developer-hub-backstage-rhdhub.%SUBDOMAIN%/catalog/default/component/frontend-app-%USERID%[Red Hat Developer Hub UI^].
2. *ISSUES*를 클릭하여 GitLab 이슈를 확인하세요.
3. 해당 애플리케이션과 관련된 모든 GitLab 문제를 볼 수 있습니다.

해결해야 할 문제가 있습니다.

이미지:module3/frontend_issues.png[너비=100%]

* *문제 링크*를 클릭하여 정보를 읽어보세요.

image::module3/frontend_issue_desc.png[너비=100%]

* Red Hat Developer Hub의 프런트엔드 구성 요소로 돌아갑니다: https://developer-hub-backstage-rhdhub.%SUBDOMAIN%/catalog/default/component/frontend-app-%USERID%[Red Hat Developer Hub UI^].

3. *개요* 탭에서 *OpenShift Dev Spaces (VS Code)*를 클릭하여 필요한 소스 코드 변경을 수행합니다.

이미지::모듈3/프론트엔드_데브스페이스.png[너비=80%]

4. Red Hat OpenShift Dev Spaces에 로그인:

4.1 *OpenShift로 로그인* 버튼을 클릭하세요:

이미지::모듈3/devspaces_login.png[너비=80%]

* Red Hat Single Sign-On(RH-SSO) 화면에서 OpenShift 자격 증명으로 로그인합니다.

 ** *사용자 이름*: `%USERID%`
 ** *비밀번호*: `{openshift-password}`

4.3 "선택한 권한 허용"을 클릭하여 액세스를 승인합니다.

이미지::모듈3/devspaces_authorize.png[너비=80%]

4.4 자격 증명을 사용하여 GitLab에 로그인합니다.

 ** *사용자 이름*: `%USERID%`
 ** *비밀번호*: `{openshift-password}`

이미지::모듈3/gitlab_인증.png[너비=80%]

4.4 *인증* 버튼을 클릭하여 *devspaces*가 귀하의 계정을 사용할 수 있도록 인증합니다.

이미지::모듈3/devspaces_authorize_user.png[너비=80%]

4.5 Red Hat OpenShift Dev Spaces 작업 공간이 준비될 때까지 기다리세요. 몇 분 정도 걸릴 수 있습니다. 작업 공간이 프로비저닝되는 동안 로딩 화면이 표시되고, Red Hat OpenShift Dev Spaces가 소스 코드 리포지토리에 저장된 devfile을 기반으로 작업 공간을 생성하는데, 이 작업 공간은 도구와 구성을 포함하도록 사용자 정의할 수 있습니다.

이미지::모듈3/devspaces_loading.png[너비=60%]

4.6 *"예, 저자를 신뢰합니다"*를 클릭하여 액세스를 확인합니다.

이미지::모듈3/devspaces_trustauthors.png[너비=80%]

** *완료 표시*를 클릭하세요

이미지::모듈3/devspaces_view.png[너비=80%]


4.7 아래 그림과 같이 `frontend-app-%USERID%`를 확장하여 `header.html` 파일을 찾습니다.

이미지::모듈3/파일_변경.png[너비=100%]


4.8 *12번째 줄*의 *제목*을 업데이트하고 선호하는 도시를 추가합니다. Red Hat OpenShift Dev Spaces가 코드를 업데이트하는 동안 자동으로 변경 사항을 저장하므로 파일을 저장할 필요가 없습니다.

*견본:*

이미지::모듈3/dev_file_changed.png[너비=80%]

4.9 소스 코드 변경 사항을 커밋하세요.

image::module3/icon_source_control.png[너비=60%, 부동 소수점=왼쪽]

* *소스 제어* 아이콘을 클릭합니다.


    * 커밋에 대한 *메시지*를 추가합니다.
    * Commit을 클릭하세요 *화살표*
    * *커밋 및 푸시* 옵션을 선택하세요.


이미지::모듈3/dev_commit.png[너비=60%]






* 변경 사항을 확인하세요

이미지::모듈3/dev_confirmed.png[너비=100%]

* Red Hat Developer Hub에서 파이프라인을 살펴보세요.

소스 코드 변경으로 인해 프런트엔드 애플리케이션 버전을 업데이트하는 새로운 파이프라인이 트리거되었습니다.

* Red Hat Developer Hub의 프런트엔드 구성 요소로 돌아갑니다: https://developer-hub-backstage-rhdhub.%SUBDOMAIN%/catalog/default/component/frontend-app-%USERID%[Red Hat Developer Hub UI^].

* *CI*를 클릭하여 파이프라인을 살펴보세요.

이미지::모듈3/프론트엔드_새로운파이프라인.png[너비=100%]

* 쿨스토어 웹페이지를 새로 고칩니다.

쿨스토어 웹페이지에서 *새로운 제목*을 보실 수 있습니다.

이미지::모듈3/최종_웹.png[너비=100%]

*축하합니다!* git 요청이 완료되었습니다.

## 보너스 포인트: 애플리케이션 종속성 및 API 탐색

* Red Hat Developer Hub의 프런트엔드 구성 요소로 돌아갑니다: https://developer-hub-backstage-rhdhub.%SUBDOMAIN%/catalog/default/component/frontend-app-%USERID%[Red Hat Developer Hub UI^].

* *개요* 탭을 클릭합니다. 다음으로, *workshop-system-rhdhub-%USERID%* 섹션을 클릭합니다.

이미지::모듈3/개요_워크숍.png[너비=80%]

* 애플리케이션 구성 요소와 API를 살펴보세요.
** 이 기능은 시스템이 서로 상호작용하는 방식을 이해하는 데 이상적입니다.

이미지::모듈3/워크숍_세부사항.png[너비=100%]

* *관계* 섹션에는 네임스페이스에 설치한 모든 서비스가 표시됩니다.
* API * 섹션에서는 프런트엔드 애플리케이션이 제품 카탈로그에서 재고에 이르기까지 백엔드 서비스 정보에 액세스하는 데 사용하는 게이트웨이 API를 보여줍니다.

## 축하해요!

Cool Store 애플리케이션을 성공적으로 구축했고, 소프트웨어 템플릿을 갖춘 Red Hat Developer Hub의 이점을 알아보았습니다. 소프트웨어 템플릿은 서비스나 소프트웨어 구성 요소를 구축하고 배포하는 데 사용된 기술의 모든 세부 정보를 배우지 않고도 사전 설계된 지원되는 방식을 제공함으로써 개발자의 인지 부하를 줄여줍니다.